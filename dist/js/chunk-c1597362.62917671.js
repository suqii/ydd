(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1597362"],{"1bc7":function(t,i,s){for(var e=s("25ba"),a=s("93ca"),n=s("84e8"),o=s("0b34"),l=s("065d"),c=s("953d"),d=s("839a"),v=d("iterator"),r=d("toStringTag"),u=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(m),C=0;C<h.length;C++){var f,_=h[C],p=m[_],M=o[_],g=M&&M.prototype;if(g&&(g[v]||l(g,v,u),g[r]||l(g,r,_),c[_]=u,p))for(f in e)g[f]||n(g,f,e[f],!0)}},"3cc9":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"slide-enter-active",attrs:{id:"detailContrainer"}},[s("Header",{attrs:{title:"影片详情"}},[s("i",{staticClass:"iconfont icon-right",on:{touchstart:t.handleToBack}})]),t.isLoading?s("Loading"):s("div",{staticClass:"contentDetail",attrs:{id:"content"}},[s("div",{staticClass:"detail_list"},[s("div",{staticClass:"detail_list_bg",style:{"background-image":"url("+t.detailMovie.img.replace(/w\.h/,"148.208")+")"}}),s("div",{staticClass:"detail_list_filter"}),s("div",{staticClass:"detail_list_content"},[s("div",{staticClass:"detail_list_img"},[s("img",{attrs:{src:t._f("setWH")(t.detailMovie.img,"148.208"),alt:""}})]),s("div",{staticClass:"detail_list_info"},[s("h2",[t._v(t._s(t.detailMovie.nm))]),s("p",[t._v(t._s(t.detailMovie.enm))]),s("p",[t._v(t._s(t.detailMovie.sc))]),s("p",[t._v(t._s(t.detailMovie.cat))]),s("p",[t._v(t._s(t.detailMovie.src)+" / "+t._s(t.detailMovie.dur)+"分钟")]),s("p",[t._v(t._s(t.detailMovie.pubDesc))]),s("div",{staticClass:"collect"},[s("div",{staticClass:"collectMovie iconfont",on:{touchstart:t.collectMovie}},[t._v("\n              收藏\n            ")]),s("div",{staticClass:"collectMovie iconfont",on:{touchstart:t.collectMovie}},[t._v("\n              看过\n            ")])])])])]),s("div",{staticClass:"movieScore"},[s("div",{staticClass:"title"},[s("div",{staticClass:"titleName"}),s("div",{staticClass:"watch"},[s("div",{staticClass:"wantWatch"},[t._v(t._s(t.wishNum)+"人想看")]),s("div",{staticClass:"watched"},[t._v(t._s(t.watchedNum)+"人看过 >")])])]),s("div",{staticClass:"score"},[s("div",{staticClass:"scoreNum"},[s("div",{staticClass:"num"},[t._v(t._s(t.detailMovie.sc))]),s("div",{staticClass:"pNum"},[t._v("149555人评")])]),s("div",{staticClass:"scoreBar"},[s("ul",[s("li",[s("div",{staticClass:"start"},[s("div",{staticClass:"iconfont iconfontA"},[t._v("\n                  \n                ")])]),s("div",{staticClass:"a"},[s("div",{staticClass:"b fiveStart"})])]),s("li",[s("div",{staticClass:"start"},[s("div",{staticClass:"iconfont iconfontB"},[t._v("")]),s("div",{staticClass:"iconfont iconfontA"},[t._v("\n                  \n                ")])]),s("div",{staticClass:"a"},[s("div",{staticClass:"b fourStart"})])]),s("li",[s("div",{staticClass:"start"},[s("div",{staticClass:"iconfont iconfontB"},[t._v("")]),s("div",{staticClass:"iconfont iconfontA"},[t._v("")])]),s("div",{staticClass:"a"},[s("div",{staticClass:"b threeStart"})])]),s("li",[s("div",{staticClass:"start"},[s("div",{staticClass:"iconfont iconfontB"},[t._v("")]),s("div",{staticClass:"iconfont iconfontA"},[t._v("")])]),s("div",{staticClass:"a"},[s("div",{staticClass:"b twoStart"})])]),s("li",[s("div",{staticClass:"start"},[s("div",{staticClass:"iconfont iconfontB"},[t._v("\n                  \n                ")]),s("div",{staticClass:"iconfont iconfontA"},[t._v("")])]),s("div",{staticClass:"a"},[s("div",{staticClass:"b oneStart"})])])])])])]),s("div",{staticClass:"title"},[s("div",{staticClass:"titleName"},[t._v("简介")]),s("div",{staticClass:"titleInfo"},[t._v("\n        展开 >\n      ")])]),s("div",{staticClass:"detail_intro"},[s("p",[t._v("\n        "+t._s(t.detailMovie.dra)+"\n      ")])]),s("div",{staticClass:"title"},[s("div",{staticClass:"titleName"},[t._v("剧照")]),s("div",{staticClass:"titleInfo"},[t._v("全部"+t._s(t.moviePhNum)+"张 >")])]),s("div",{staticClass:"swiper-container"},[s("div",{staticClass:"swiper-wrapper"},t._l(t.detailMovie.photos,(function(i,e){return s("div",{key:e,staticClass:"swiper-slide"},[s("div",{staticClass:"slide-inner"},[s("img",{attrs:{src:t._f("setWH")(i,""),alt:""}})])])})),0)]),s("div",{staticClass:"comments"},[s("div",{staticClass:"title"},[t._v("\n        影评\n      ")]),s("div",{staticClass:"emo_line_01"}),s("div",{staticClass:"commentsInfo"},[s("ul",t._l(t.movieCon,(function(i,e){return s("li",{key:e},[s("div",{staticClass:"userInfo"},[s("div",{staticClass:"headImg"},[s("img",{attrs:{src:i.avatarurl}})]),s("div",{staticClass:"nickName"},[t._v(t._s(i.nickName))]),s("div",{staticClass:"share"},[t._v("分享")])]),s("div",{staticClass:"userCon"},[s("pre",[t._v(t._s(i.content))])]),s("div",{staticClass:"conIn"},[s("div",{staticClass:"replay"},[t._v(t._s(i.reply)+" 回复")]),s("div",{staticClass:"publishTime"},[t._v(t._s(i.time))]),s("div",{staticClass:"like iconfont icon-dianzan"},[t._v(t._s(i.approve))])])])})),0)])])])],1)},a=[],n=(s("1bc7"),s("7826")),o=s("981c"),l=s("fa4e"),c=(s("9333"),s("b5c1"),{name:"Detail",data:function(){return{detailMovie:{},movieCon:[],isLoading:!0,moviePhNum:0,wishNum:0,watchedNum:0}},components:{Header:o["a"],swiper:l["a"]},props:["movieId"],methods:{timeDiffe:function(t){var i=null,s=t,e=new Date,a=e.getTime()-new Date(s).getTime(),n=Math.floor(a/864e5),o=a%864e5,l=Math.floor(o/36e5),c=o%36e5,d=Math.floor(c/6e4),v=c%6e4;Math.round(v/1e3);return n>=1?i=n+" 天前":l>=1?i=l+" 小时前":d>=1&&(i=d+" 分钟前"),i},handleToBack:function(){this.$router.back()},carouselScroll:function(){var t=.5;new Swiper(".swiper-container",{loop:!0,speed:2e3,autoplay:{disableOnInteraction:!1,delay:3e3},observeParents:!1,observer:!0,on:{progress:function(){for(var i=this,s=0;s<i.slides.length;s++){var e=i.slides[s].progress,a=i.width*t,n=e*a;i.slides[s].querySelector(".slide-inner").style.transform="translate3d("+n+"px, 0, 0)"}},touchStart:function(){for(var t=this,i=0;i<t.slides.length;i++)t.slides[i].style.transition=""},setTransition:function(t){for(var i=this,s=0;s<i.slides.length;s++)i.slides[s].style.transition=t+"ms",i.slides[s].querySelector(".slide-inner").style.transition=t+"ms"}}})},collectMovie:function(){var t=localStorage.getItem("email");console.log(t),this.axios.post("/api/users/pushMovieList",{email:t,movieId:this.detailMovie.id,movieName:this.detailMovie.nm,movieImg:this.detailMovie.img,movieCat:this.detailMovie.cat,movieDir:this.detailMovie.dir,movieOriLang:this.detailMovie.oriLang,movieEnm:this.detailMovie.enm,movieRt:this.detailMovie.rt}).then((function(t){var i=t.data.status;0==i?Object(n["a"])({title:"收藏",content:"收藏成功",ok:"确定"}):Object(n["a"])({title:"收藏",content:"您已收藏该电影",ok:"确定",handleOk:function(){}})}))},wishNumAnim:function(t){var i=this,s=Math.round(t/4);this.timer=setInterval((function(){i.wishNum+=s,i.wishNum>=t&&(i.wishNum=t,clearInterval(i.timer))}),250)},watchedNumAnim:function(t){var i=this,s=Math.round(t/6);this.timer=setInterval((function(){i.watchedNum+=s,i.watchedNum>=t&&(i.watchedNum=t,clearInterval(i.timer))}),350)}},mounted:function(){var t=this;this.axios.get("/api/api/detailmovie?movieId="+this.movieId).then((function(i){console.log(i.data);i.data.msg;t.isLoading=!1,t.detailMovie=i.data.detailMovie,t.moviePhNum=t.detailMovie.photos.length,t.wishNumAnim(i.data.detailMovie.wish),t.watchedNumAnim(i.data.detailMovie.watched),t.$nextTick((function(){t.carouselScroll()}))})),this.axios.get("/api/api5/movie/"+this.movieId+".json?_v_=yes&offset=1").then((function(i){console.log(i.data),t.movieCon=i.data.cmts,t.movieCon.forEach((function(i){i.time&&(i.time=t.timeDiffe(i.time))})),console.log("评论"),console.log(t.movieCon)}))}}),d=c,v=(s("5b9e"),s("cba8")),r=Object(v["a"])(d,e,a,!1,null,"74acb1f0",null);i["default"]=r.exports},"5b9e":function(t,i,s){"use strict";s("d1c3")},7826:function(t,i,s){"use strict";s.d(i,"a",(function(){return r}));var e=s("430a"),a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"messageBox"},[s("h2",[t._v(t._s(t.title))]),s("p",[t._v(t._s(t.content))]),s("div",{staticClass:"buttons"},[t.cancel?s("div",{staticClass:"button",on:{click:t.handleCancel}},[t._v(t._s(t.cancel))]):t._e(),t.ok?s("div",{staticClass:"button button-primary",on:{click:t.handleOk}},[t._v(t._s(t.ok))]):t._e()])])},n=[],o={name:"MessageBox"},l=o,c=(s("b927"),s("cba8")),d=Object(c["a"])(l,a,n,!1,null,"7dc1a154",null),v=d.exports,r=function(){return function(t){var i={title:"",content:"",cancel:"",ok:"",handleCancel:null,handleOk:null},s=e["default"].extend(v);for(var a in t)i[a]=t[a];var n=new s({el:document.createElement("div"),data:{title:i.title,content:i.content,cancel:i.cancel,ok:i.ok},methods:{handleCancel:function(){i.handleCancel&&i.handleCancel.call(this),document.body.removeChild(n.$el)},handleOk:function(){i.handleOk&&i.handleOk.call(this),document.body.removeChild(n.$el)}}});document.body.appendChild(n.$el)}}()},b927:function(t,i,s){"use strict";s("e5b9")},d1c3:function(t,i,s){},e5b9:function(t,i,s){}}]);
//# sourceMappingURL=chunk-c1597362.62917671.js.map